CREATE DATABASE IF NOT EXISTS `DMS`;
USE `DMS`;
CREATE TABLE IF NOT EXISTS `USERS` ( `UID` NVARCHAR(50) NOT NULL, `USERNAME` NVARCHAR(45) NOT NULL, `USERPASSWD` NVARCHAR(255), `LOGGEDIN` INT NOT NULL DEFAULT 0, `CREATED` DATETIME NOT NULL, `UPDATED` DATETIME, PRIMARY KEY `USERS_P_KEY`( `UID` ), INDEX `INDEX_UID` ( `UID` ) );
CREATE TABLE IF NOT EXISTS `GROUPS` ( `GID` NVARCHAR(50) NOT NULL, `GROUPNAME` NVARCHAR(100) NOT NULL, `GROUPDESCRIPTION` NVARCHAR(255), `CREATED` DATETIME NOT NULL, `UPDATED` DATETIME, PRIMARY KEY `GROUP_P_KEY`( `GID` ), INDEX `INDEX_DID` ( `GID` ) );
CREATE TABLE IF NOT EXISTS `DOCUMENTS` ( `DID` NVARCHAR(50) NOT NULL, `UID` NVARCHAR(50) NOT NULL, `GID` NVARCHAR(50) NOT NULL, `DOCNAME` NVARCHAR(255) NOT NULL, `DOCPATH` NVARCHAR(255) NOT NULL, `CHECKEDOUT` INT NOT NULL DEFAULT 0, `CREATED` DATETIME NOT NULL, `UPDATED` DATETIME, PRIMARY KEY `DOC_P_KEY`( `DID` ), FOREIGN KEY `DOC_F_KEY_UID`( `UID` ) REFERENCES `USERS`( `UID` ), FOREIGN KEY `DOC_F_KEY_GID`( `GID` ) REFERENCES `GROUPS`( `GID` ), INDEX `INDEX_DID` ( `DID` ) );
CREATE TABLE IF NOT EXISTS `USERSDATA` ( `UDID` NVARCHAR(50) NOT NULL, `UID` NVARCHAR(50) NOT NULL, `FNAME` NVARCHAR(45) NOT NULL, `LNAME` NVARCHAR(45) NOT NULL, `STREETNAME` NVARCHAR(100), `STREETNR` NVARCHAR(10), `CITY` NVARCHAR(50), `ZIPCODE` NVARCHAR(50), `COUNTRY` NVARCHAR(255), `EMAIL` NVARCHAR(50), `CREATED` DATETIME NOT NULL, `UPDATED` DATETIME, PRIMARY KEY `USERDATA_P_KEY`( `UDID` ), FOREIGN KEY `USERDATA_F_KEY`( `UID` ) REFERENCES `USERS`( `UID` ), INDEX `INDEX_UDID` ( `UDID` ) );